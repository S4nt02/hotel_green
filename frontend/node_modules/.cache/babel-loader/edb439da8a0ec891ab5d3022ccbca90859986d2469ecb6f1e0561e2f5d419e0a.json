{"ast":null,"code":"import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';// Importar useNavigate para redirecionamento\nimport{API_URL}from'../../url';import entradaImg from'../../assets/entrada_hotel.jpg';import{useAuth}from'../../context/authContext';// Importando o contexto\n///////////////////////IMPORT DOS COMPONENTES + CSS//////////////////////////////\nimport\"./login.css\";import HeaderComponente from'../../componetes/header/headerComponente';import RecoverPage from'../../componetes/recover_senha/recoverPage';import Rodape from'../../componetes/rodape/rodape';//////////////////////////////////////////////////////////////////////////\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function LoginPage(){const{login,usuario,carregando,logout}=useAuth();// Pegando o método de login do contexto\nconst navigate=useNavigate();// Para navegar após login\nconst[erroUsuario,setErroUsuario]=useState(\"\");const[erroSenha,setErroSenha]=useState(\"\");const[erroLogin,setErroLogin]=useState(\"\");const[email,setEmail]=useState(\"\");const[senha,setSenha]=useState(\"\");const fazerLogin=async()=>{if(!email.trim()){setErroUsuario(\"Por favor insira o e-mail.\");}if(!senha.trim()){setErroSenha(\"Por favor insira sua senha.\");return;}if(!email.trim()||!senha.trim()){return;}try{const resposta=await fetch(`${API_URL}/login`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email,senha}),credentials:\"include\"});const data=await resposta.json();if(data.logado){login(email,senha);alert(\"Login realizado com sucesso!\");navigate(\"/\");}else{setErroLogin(\"E-mail ou senha incorretos.\");}}catch(error){console.error(\"Erro ao fazer login:\",error);setErroLogin(\"Ocorreu um erro. Tente novamente.\");}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"main\",{className:\"page\",style:{backgroundImage:`url(${entradaImg})`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"overlay\"}),/*#__PURE__*/_jsx(HeaderComponente,{className:\"header_login\"}),/*#__PURE__*/_jsx(\"main\",{className:\"alinhar_login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login_section\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Digite seu email e senha para prosseguir\"}),erroLogin&&/*#__PURE__*/_jsx(\"label\",{className:\"erro\",onChange:()=>{if(erroUsuario)setErroUsuario(\"\");if(erroSenha)setErroSenha(\"\");},children:erroLogin}),/*#__PURE__*/_jsx(\"input\",{className:\"loin_input\",type:\"email\",id:\"usuario\",placeholder:\"Digite seu Email\",value:email,onChange:e=>{setEmail(e.target.value);if(erroUsuario)setErroUsuario(\"\");}}),erroUsuario&&/*#__PURE__*/_jsx(\"label\",{className:\"erro\",children:erroUsuario}),/*#__PURE__*/_jsx(\"input\",{className:\"loin_input\",type:\"password\",id:\"senha\",placeholder:\"Digite sua Senha\",value:senha,onChange:e=>{setSenha(e.target.value);if(erroSenha)setErroSenha(\"\");}}),erroSenha&&/*#__PURE__*/_jsx(\"label\",{className:\"erro\",children:erroSenha}),/*#__PURE__*/_jsx(RecoverPage,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"cadastro_login\",children:[/*#__PURE__*/_jsx(Link,{to:\"/cadastro\",children:/*#__PURE__*/_jsx(\"button\",{id:\"cadastro\",children:\"CADASTRE-SE\"})}),/*#__PURE__*/_jsx(\"button\",{id:\"login\",onClick:fazerLogin,children:\"LOGIN\"})]})]})})]})});}export default LoginPage;","map":{"version":3,"names":["React","useState","Link","useNavigate","API_URL","entradaImg","useAuth","HeaderComponente","RecoverPage","Rodape","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginPage","login","usuario","carregando","logout","navigate","erroUsuario","setErroUsuario","erroSenha","setErroSenha","erroLogin","setErroLogin","email","setEmail","senha","setSenha","fazerLogin","trim","resposta","fetch","method","headers","body","JSON","stringify","credentials","data","json","logado","alert","error","console","children","className","style","backgroundImage","onChange","type","id","placeholder","value","e","target","to","onClick"],"sources":["C:/Users/andre/hotel_green/frontend/src/pages/login/loginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom'; // Importar useNavigate para redirecionamento\r\nimport { API_URL } from '../../url';\r\nimport entradaImg from '../../assets/entrada_hotel.jpg';\r\nimport { useAuth } from '../../context/authContext'; // Importando o contexto\r\n\r\n///////////////////////IMPORT DOS COMPONENTES + CSS//////////////////////////////\r\nimport \"./login.css\";\r\nimport HeaderComponente from '../../componetes/header/headerComponente';\r\nimport RecoverPage from '../../componetes/recover_senha/recoverPage';\r\nimport Rodape from '../../componetes/rodape/rodape';\r\n//////////////////////////////////////////////////////////////////////////\r\n\r\nfunction LoginPage() {\r\n    const { login, usuario, carregando, logout } = useAuth(); // Pegando o método de login do contexto\r\n    const navigate = useNavigate(); // Para navegar após login\r\n    const [erroUsuario, setErroUsuario] = useState(\"\");\r\n    const [erroSenha, setErroSenha] = useState(\"\");\r\n    const [erroLogin, setErroLogin] = useState(\"\");\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [senha, setSenha] = useState(\"\");\r\n\r\n    const fazerLogin = async () => {\r\n        if (!email.trim()) {\r\n            setErroUsuario(\"Por favor insira o e-mail.\");\r\n        }\r\n\r\n        if (!senha.trim()) {\r\n            setErroSenha(\"Por favor insira sua senha.\");\r\n            return;\r\n        }\r\n\r\n        if (!email.trim() || !senha.trim()) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const resposta = await fetch(`${API_URL}/login`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({ email, senha }),\r\n                credentials: \"include\", \r\n            });\r\n\r\n            const data = await resposta.json();\r\n            if (data.logado) {\r\n                login(email, senha);\r\n                alert(\"Login realizado com sucesso!\");\r\n                navigate(\"/\"); \r\n            } else {\r\n                setErroLogin(\"E-mail ou senha incorretos.\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Erro ao fazer login:\", error);\r\n            setErroLogin(\"Ocorreu um erro. Tente novamente.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <main className=\"page\" style={{ backgroundImage: `url(${entradaImg})` }}>\r\n                <div className=\"overlay\"></div>\r\n                <HeaderComponente className=\"header_login\"></HeaderComponente>\r\n                <main className=\"alinhar_login\">\r\n                    <div className=\"login_section\">\r\n                        <h6>Digite seu email e senha para prosseguir</h6>\r\n                        {erroLogin && (\r\n                            <label className=\"erro\" onChange={() => { if (erroUsuario) setErroUsuario(\"\"); if (erroSenha) setErroSenha(\"\"); }}>\r\n                                {erroLogin}\r\n                            </label>\r\n                        )}\r\n                        <input\r\n                            className=\"loin_input\"\r\n                            type=\"email\"\r\n                            id=\"usuario\"\r\n                            placeholder=\"Digite seu Email\"\r\n                            value={email}\r\n                            onChange={(e) => {\r\n                                setEmail(e.target.value);\r\n                                if (erroUsuario) setErroUsuario(\"\");\r\n                            }}\r\n                        />\r\n                        {erroUsuario && <label className=\"erro\">{erroUsuario}</label>}\r\n                        <input\r\n                            className=\"loin_input\"\r\n                            type=\"password\"\r\n                            id=\"senha\"\r\n                            placeholder=\"Digite sua Senha\"\r\n                            value={senha}\r\n                            onChange={(e) => {\r\n                                setSenha(e.target.value);\r\n                                if (erroSenha) setErroSenha(\"\");\r\n                            }}\r\n                        />\r\n                        {erroSenha && <label className=\"erro\">{erroSenha}</label>}\r\n                        <RecoverPage></RecoverPage>\r\n                        <div className=\"cadastro_login\">\r\n                            <Link to=\"/cadastro\">\r\n                                <button id=\"cadastro\">CADASTRE-SE</button>\r\n                            </Link>\r\n                            <button id=\"login\" onClick={fazerLogin}>\r\n                                LOGIN\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </main>\r\n            </main>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}