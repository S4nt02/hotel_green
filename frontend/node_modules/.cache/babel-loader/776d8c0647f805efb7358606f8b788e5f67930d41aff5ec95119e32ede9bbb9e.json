{"ast":null,"code":"import React from'react';import{useEffect,useState}from'react';//import para recuperar dados do back\nimport{coerce,z}from'zod';import{zodResolver}from'@hookform/resolvers/zod';import{set,useForm}from'react-hook-form';import{API_URL}from'../../url';import{Key}from'lucide-react';import{CirclePlus,Search}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CadItens(){const[itemOpen,setItemOpen]=useState(false);const[categorias,setCategorias]=useState([]);const[itens,setItens]=useState([]);const abrirAdicionarItem=()=>{setItemOpen(!itemOpen);};const buscarCategoria=async()=>{try{const buscarCategoria=await fetch(`${API_URL}/api/buscarCategoria`);const dados=await buscarCategoria.json();setCategorias(dados);}catch{}};const cadastroItem=async dados=>{console.log(JSON.stringify(dados));try{const adicionarItem=await fetch(`${API_URL}/api/adicionarItem`,{method:`POST`,headers:{'Content-Type':'application/json'},body:JSON.stringify(dados)});if(!adicionarItem.sucesso){}}catch{}buscarItens();};const buscarItens=async()=>{try{const buscarItens=await fetch(`${API_URL}/api/buscarItens`);const dados=await buscarItens.json();setItens(dados);}catch{}};const validarItem=z.object({nomeItem:z.string().min(1,{message:\"O campo de nome do item precisa está preenchido\"}),categoria:z.coerce.number().min(1,{message:\"Selecione uma categoria\"}),preco:z.coerce.number().min(0.01,{message:\"Defina o preço do item\"})});useEffect(()=>{buscarCategoria();buscarItens();},[]);const{register,handleSubmit,setValue,reset,watch,clearErrors,formState:{errors}}=useForm({resolver:zodResolver(validarItem)});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"busca\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{onClick:buscarItens,children:/*#__PURE__*/_jsx(Search,{size:18})})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:abrirAdicionarItem,children:[/*#__PURE__*/_jsx(CirclePlus,{size:18}),\"Adicionar\"]})]}),itemOpen&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(cadastroItem),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nome do item\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Descri\\xE7\\xE3o do item\",...register(\"nomeItem\")}),errors.nomeItem&&/*#__PURE__*/_jsx(\"p\",{children:errors.nomeItem.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Categoria\"}),/*#__PURE__*/_jsxs(\"select\",{...register(\"categoria\"),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione uma categoria\"}),categorias.map(categoria=>/*#__PURE__*/_jsx(\"option\",{value:categoria.id,children:categoria.nomeCategoria},categoria.id))]}),errors.categoria&&/*#__PURE__*/_jsx(\"p\",{children:errors.categoria.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pre\\xE7o(R$)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"0000,00\",...register(\"preco\")}),errors.preco&&/*#__PURE__*/_jsx(\"p\",{children:errors.preco.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:abrirAdicionarItem,children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Adicionar\"})]})}),itens.map(item=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Codigo-\",item.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Item-\",item.nomeItem]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Categoria-\",item.categoria]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Pre\\xE7o-\",item.preco]})]}))]});}export default CadItens;","map":{"version":3,"names":["React","useEffect","useState","coerce","z","zodResolver","set","useForm","API_URL","Key","CirclePlus","Search","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CadItens","itemOpen","setItemOpen","categorias","setCategorias","itens","setItens","abrirAdicionarItem","buscarCategoria","fetch","dados","json","cadastroItem","console","log","JSON","stringify","adicionarItem","method","headers","body","sucesso","buscarItens","validarItem","object","nomeItem","string","min","message","categoria","number","preco","register","handleSubmit","setValue","reset","watch","clearErrors","formState","errors","resolver","children","className","type","onClick","size","onSubmit","placeholder","value","map","id","nomeCategoria","item"],"sources":["C:/Users/andre/hotel_green/frontend/src/componetes/cad_itens/cadItens.js"],"sourcesContent":["import React from 'react';\r\nimport { useEffect, useState } from 'react' //import para recuperar dados do back\r\nimport { coerce, z } from 'zod';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { set, useForm} from 'react-hook-form';\r\nimport { API_URL } from '../../url';\r\nimport { Key } from 'lucide-react';\r\nimport {CirclePlus, Search} from 'lucide-react'\r\n\r\nfunction CadItens () {\r\n    const [itemOpen, setItemOpen] = useState(false)\r\n    const [categorias, setCategorias] = useState([])\r\n    const [itens, setItens] = useState([])\r\n\r\n    const abrirAdicionarItem = () => {\r\n        setItemOpen(!itemOpen)\r\n    }\r\n\r\n\r\n    const buscarCategoria = async () => {\r\n        try{\r\n            const buscarCategoria = await fetch(`${API_URL}/api/buscarCategoria`)\r\n            const dados = await buscarCategoria.json()\r\n\r\n            setCategorias(dados)\r\n        }\r\n        catch{\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const cadastroItem = async (dados) => {\r\n        console.log(JSON.stringify(dados))\r\n        try{\r\n            const adicionarItem = await fetch(`${API_URL}/api/adicionarItem`, {\r\n                method : `POST`,\r\n                headers : {\r\n                    'Content-Type' : 'application/json'\r\n                },\r\n                body : JSON.stringify(dados)\r\n            })\r\n\r\n            if(!adicionarItem.sucesso){\r\n\r\n            }\r\n\r\n\r\n        }\r\n        catch{\r\n\r\n        }\r\n\r\n        buscarItens()\r\n    }\r\n\r\n    const buscarItens = async () => {\r\n        try{\r\n            const buscarItens = await fetch(`${API_URL}/api/buscarItens`)\r\n            const dados = await buscarItens.json()\r\n\r\n            setItens(dados)\r\n        }\r\n        catch{\r\n\r\n        }\r\n    }\r\n\r\n    const validarItem = z.object({\r\n        nomeItem : z.string().min(1, {message : \"O campo de nome do item precisa está preenchido\"}),\r\n        categoria : z.coerce.number().min(1, {message : \"Selecione uma categoria\"}),\r\n        preco : z.coerce.number().min(0.01 , {message : \"Defina o preço do item\"})\r\n    })\r\n\r\n    useEffect(() => {\r\n        buscarCategoria()\r\n        buscarItens()\r\n    }, [])\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setValue,\r\n        reset,\r\n        watch,\r\n        clearErrors,\r\n        formState: { errors }\r\n    } = useForm({\r\n        resolver: zodResolver(validarItem)\r\n    })\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='busca'>\r\n                <div>\r\n                    <input type='text'></input>\r\n                    <button onClick={buscarItens}><Search size={18}></Search></button>                    \r\n                </div>\r\n\r\n                <button onClick={abrirAdicionarItem}><CirclePlus size={18}/>Adicionar</button>\r\n            </div>\r\n\r\n            {itemOpen && (<div>\r\n                <form onSubmit={handleSubmit(cadastroItem)}>\r\n                    <div>\r\n                        <label>Nome do item</label>\r\n                        <input type='text' placeholder='Descrição do item' {...register(\"nomeItem\")}></input>    \r\n                        {errors.nomeItem && <p>{errors.nomeItem.message}</p>}                    \r\n                    </div>\r\n                    <div>\r\n                        <label>Categoria</label>\r\n                        <select {...register(\"categoria\")}>\r\n                            <option value={\"\"}>Selecione uma categoria</option>\r\n                            {categorias.map(categoria => (\r\n                                <option key={categoria.id} value={categoria.id}>{categoria.nomeCategoria}</option>\r\n                            ))}\r\n                        </select>  \r\n                        {errors.categoria && <p>{errors.categoria.message}</p>}                        \r\n                    </div>\r\n                    <div>\r\n                        <label>\r\n                            Preço(R$)\r\n                        </label>\r\n                        <input type='text' placeholder='0000,00' {...register(\"preco\")}></input>\r\n                        {errors.preco && <p>{errors.preco.message}</p>}  \r\n                    </div>\r\n                    <button onClick={abrirAdicionarItem}>Cancelar</button>\r\n                    <button type='submit'>Adicionar</button>\r\n                </form>\r\n            </div>)}\r\n\r\n            {itens.map(item => (\r\n                <div>\r\n                    <p>Codigo-{item.id}</p>\r\n                    <p>Item-{item.nomeItem}</p>\r\n                    <p>Categoria-{item.categoria}</p>\r\n                    <p>Preço-{item.preco}</p>\r\n                </div>\r\n            ))}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CadItens"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}