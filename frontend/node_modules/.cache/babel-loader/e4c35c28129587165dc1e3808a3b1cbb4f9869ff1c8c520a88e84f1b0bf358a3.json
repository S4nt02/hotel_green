{"ast":null,"code":"import{useEffect,useState}from\"react\";import HeaderComponente from\"../../componetes/header/headerComponente\";import{API_URL}from\"../../url\";import\"./hospedes.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Hospedes(){const[infos,setInfos]=useState([]);const[unidades,setUnidades]=useState([]);const[unidadeSelecionada,setUnidadeSelecionada]=useState(\"\");const[dadosRelatorio,setDadosRelatorio]=useState([]);const buscarHospedes=async()=>{const resultado=await fetch(`${API_URL}/api/buscarHospedes`);const dados=await resultado.json();setInfos(dados);setDadosRelatorio(dados);};const buscarUnidade=async()=>{try{const buscarUnidade=await fetch(`${API_URL}/api/buscarUnidade`);const dados=await buscarUnidade.json();setUnidades(dados);}catch(erro){console.error(\"Erro ao buscar unidades:\",erro);}};const removerValoresVazios=array=>{return array.filter(item=>item!==\"\");};const converterData=dataCon=>{const dataFormatada=new Date(dataCon).toLocaleDateString(\"pt-BR\");return dataFormatada;};const filtrarAcomodacoes=lista=>{return lista.filter(acomodacao=>{const idUnidadeAcomodacao=String(acomodacao.unidade||\"\");return unidadeSelecionada===\"\"||idUnidadeAcomodacao===unidadeSelecionada;});};const baixarRelatorio=async()=>{const response=await fetch(`${API_URL}/api/geraRelatorioHospedes`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(dadosRelatorio)});const blob=await response.blob();const url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download='relatorio.pdf';link.click();};useEffect(()=>{buscarHospedes();buscarUnidade();},[]);useEffect(()=>{setDadosRelatorio(filtrarAcomodacoes(infos));},[unidadeSelecionada,infos]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HeaderComponente,{}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"unidade_relatorio\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"title_unidade\",children:\"Unidade\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"linha_select\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"campo_relatorio\",value:unidadeSelecionada,onChange:e=>setUnidadeSelecionada(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:'',children:\"Todas unidades\"}),unidades.map(unidade=>/*#__PURE__*/_jsx(\"option\",{value:unidade.id,children:unidade.nomeUnidade},unidade.id))]}),/*#__PURE__*/_jsx(\"button\",{onClick:baixarRelatorio,children:\"Baixar relatorio\"})]})]}),dadosRelatorio.map(info=>/*#__PURE__*/_jsxs(\"div\",{className:\"relatorios\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"infos\",children:[\"Reserva: \",info.id]}),/*#__PURE__*/_jsxs(\"p\",{className:\"infos\",children:[\"Data de check-in: \",info.horarioEntrada]}),/*#__PURE__*/_jsxs(\"p\",{className:\"infos\",children:[\"Data de sa\\xEDda: \",converterData(info.checkOut)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"infos\",children:[\"Unidade: \",info.nomeUnidade]}),/*#__PURE__*/_jsxs(\"p\",{className:\"infos\",children:[\"Quarto: \",info.numAcomodacao]}),/*#__PURE__*/_jsxs(\"p\",{className:\"infos\",children:[\"Hospede Principal: \",info.hospede]}),/*#__PURE__*/_jsx(\"p\",{className:\"infos\",children:\"Acompanhantes:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"infos\",children:\"Adultos:\"}),removerValoresVazios(info.acompanhantesAdultos).map((acompanhante,index)=>/*#__PURE__*/_jsx(\"p\",{children:acompanhante},index)),/*#__PURE__*/_jsx(\"p\",{children:\"Crian\\xE7as:\"}),removerValoresVazios(info.acompanhantesCriancas).map((acompanhante,index)=>/*#__PURE__*/_jsx(\"p\",{children:acompanhante},index))]},info.id))]})]});}export default Hospedes;","map":{"version":3,"names":["useEffect","useState","HeaderComponente","API_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Hospedes","infos","setInfos","unidades","setUnidades","unidadeSelecionada","setUnidadeSelecionada","dadosRelatorio","setDadosRelatorio","buscarHospedes","resultado","fetch","dados","json","buscarUnidade","erro","console","error","removerValoresVazios","array","filter","item","converterData","dataCon","dataFormatada","Date","toLocaleDateString","filtrarAcomodacoes","lista","acomodacao","idUnidadeAcomodacao","String","unidade","baixarRelatorio","response","method","headers","body","JSON","stringify","blob","url","window","URL","createObjectURL","link","document","createElement","href","download","click","children","className","value","onChange","e","target","map","id","nomeUnidade","onClick","info","horarioEntrada","checkOut","numAcomodacao","hospede","acompanhantesAdultos","acompanhante","index","acompanhantesCriancas"],"sources":["C:/hotel_green/frontend/src/pages/hospedes/hospedes.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport HeaderComponente from \"../../componetes/header/headerComponente\"\r\nimport { API_URL } from \"../../url\"\r\nimport \"./hospedes.css\" \r\nfunction Hospedes () {\r\n\r\n    const [infos, setInfos] = useState([])\r\n    const [unidades, setUnidades] = useState([])\r\n    const [unidadeSelecionada, setUnidadeSelecionada] = useState(\"\")\r\n    const [dadosRelatorio, setDadosRelatorio] = useState([])\r\n\r\n    const buscarHospedes = async () => {\r\n        const resultado = await fetch(`${API_URL}/api/buscarHospedes`)\r\n        const dados = await resultado.json()\r\n\r\n        setInfos(dados)\r\n        setDadosRelatorio(dados)\r\n    }\r\n\r\n    const buscarUnidade = async () => {\r\n        try {\r\n            const buscarUnidade = await fetch(`${API_URL}/api/buscarUnidade`);\r\n            const dados = await buscarUnidade.json();\r\n\r\n            setUnidades(dados);\r\n        } catch (erro) {\r\n            console.error(\"Erro ao buscar unidades:\", erro);\r\n        }\r\n    };\r\n\r\n    const removerValoresVazios = (array) => {\r\n        return array.filter(item => item !== \"\")\r\n    }\r\n\r\n    const converterData = (dataCon) => {\r\n        const dataFormatada = new Date(dataCon).toLocaleDateString(\"pt-BR\")\r\n        return dataFormatada\r\n    }\r\n\r\n    const filtrarAcomodacoes = (lista) => {\r\n        return lista.filter(acomodacao => {\r\n            const idUnidadeAcomodacao = String(acomodacao.unidade || \"\")\r\n            return unidadeSelecionada === \"\" || idUnidadeAcomodacao === unidadeSelecionada\r\n        })\r\n    }\r\n\r\n    const baixarRelatorio = async () => {\r\n        const response = await fetch(`${API_URL}/api/geraRelatorioHospedes`, {\r\n            method: 'POST',\r\n            headers: {\r\n            'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(dadosRelatorio),\r\n        });\r\n\r\n        const blob = await response.blob();\r\n        const url = window.URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = 'relatorio.pdf';\r\n        link.click();\r\n    }\r\n\r\n    useEffect(() => {\r\n        buscarHospedes()\r\n        buscarUnidade()\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        setDadosRelatorio(filtrarAcomodacoes(infos))\r\n    }, [unidadeSelecionada, infos])\r\n\r\n    return(\r\n        <>\r\n            <HeaderComponente/>\r\n            <main>\r\n                <div className=\"unidade_relatorio\">\r\n                    <label className=\"title_unidade\">Unidade</label>\r\n                    <div className=\"linha_select\">\r\n                        <select className=\"campo_relatorio\"\r\n                           value={unidadeSelecionada}\r\n                           onChange={(e) => setUnidadeSelecionada(e.target.value)}\r\n                        >\r\n                           <option value={''}>Todas unidades</option>\r\n                           {unidades.map(unidade => (\r\n                           <option key={unidade.id} value={unidade.id}>{unidade.nomeUnidade}</option>\r\n                           ))}\r\n                        </select>\r\n                        <button onClick={baixarRelatorio}>Baixar relatorio</button>\r\n                    </div>\r\n                    \r\n                </div>\r\n                    {dadosRelatorio.map(info => (\r\n                            <div key={info.id} className=\"relatorios\">\r\n                                <p className=\"infos\">Reserva: {info.id}</p>\r\n                                <p className=\"infos\">Data de check-in: {info.horarioEntrada}</p>\r\n                                <p className=\"infos\">Data de saída: {converterData(info.checkOut)}</p>\r\n                                <p className=\"infos\">Unidade: {info.nomeUnidade}</p>\r\n                                <p className=\"infos\">Quarto: {info.numAcomodacao}</p>\r\n                                <p className=\"infos\">Hospede Principal: {info.hospede}</p>\r\n                                <p className=\"infos\">Acompanhantes:</p>\r\n                                <p className=\"infos\">Adultos:</p>\r\n                                {removerValoresVazios(info.acompanhantesAdultos).map((acompanhante, index) => (\r\n                                 <p key={index}>{acompanhante}</p>\r\n                                ))}\r\n                                <p>Crianças:</p>\r\n                                {removerValoresVazios(info.acompanhantesCriancas).map((acompanhante, index) => (\r\n                                 <p key={index}>{acompanhante}</p>\r\n                                ))}\r\n                            </div>\r\n                    ))}\r\n                \r\n            </main>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Hospedes"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}