{"ast":null,"code":"import React,{useState}from'react';import\"./recover.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function RecoverPage(){const[email,setEmail]=useState('');const[mensagem,setMensagem]=useState('');const[carregando,setCarregando]=useState(false);const[isOpen,setIsOpen]=useState(false);const abrirModal=()=>setIsOpen(true);const fecharModal=()=>{setIsOpen(false);setEmail('');setMensagem('');setCarregando(false);};const validarEmail=email=>{const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;return emailRegex.test(email);};const verificarEmail=async()=>{setCarregando(true);setMensagem('');if(!validarEmail(email)){setMensagem('❌ Email inválido.');setCarregando(false);return;}try{const API_URL=process.env.REACT_APP_API_URL||'http://localhost:8080';const resposta=await fetch(`${API_URL}/recover_senha`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})});const dados=await resposta.json();if(dados.sucesso){setMensagem('✅ Nova senha enviada para seu e-mail!');}else if(dados.existe===false){setMensagem('❌ Email não encontrado.');}else{setMensagem('❌ Ocorreu um erro inesperado.');}}catch(error){setMensagem('❌ Erro ao verificar e enviar email.');}setCarregando(false);};const estilosMensagem={sucesso:{color:'green'},erro:{color:'red'}};let tipoMensagem='erro';if(mensagem.includes('Nova senha'))tipoMensagem='sucesso';return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h6\",{onClick:abrirModal,children:\"Esqueceu sua senha?\"}),isOpen&&/*#__PURE__*/_jsx(\"div\",{className:`container ${isOpen?'open':''}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"container_content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alinhar_fecharModal\",children:/*#__PURE__*/_jsx(\"h1\",{onClick:fecharModal,children:\"x\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"alinhar_modal_content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recuperar Senha\"}),/*#__PURE__*/_jsx(\"input\",{className:\"recover_input\",type:\"email\",placeholder:\"Digite o email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:verificarEmail,disabled:carregando,className:\"recover_button\",children:carregando?'Enviando...':'Enviar nova senha'}),/*#__PURE__*/_jsx(\"p\",{style:tipoMensagem==='sucesso'?estilosMensagem.sucesso:estilosMensagem.erro,children:mensagem})]})]})})]});}export default RecoverPage;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RecoverPage","email","setEmail","mensagem","setMensagem","carregando","setCarregando","isOpen","setIsOpen","abrirModal","fecharModal","validarEmail","emailRegex","test","verificarEmail","API_URL","process","env","REACT_APP_API_URL","resposta","fetch","method","headers","body","JSON","stringify","dados","json","sucesso","existe","error","estilosMensagem","color","erro","tipoMensagem","includes","children","onClick","className","type","placeholder","value","onChange","e","target","disabled","style"],"sources":["C:/Users/andre/hotel_green/frontend/src/componetes/recover_senha/recoverPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport \"./recover.css\"\r\n\r\nfunction RecoverPage() {\r\n  const [email, setEmail] = useState('');\r\n  const [mensagem, setMensagem] = useState('');\r\n  const [carregando, setCarregando] = useState(false);\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  \r\n\r\n  const abrirModal = () => setIsOpen(true)\r\n  const fecharModal = () => {\r\n    setIsOpen(false)\r\n    setEmail('')\r\n    setMensagem('')\r\n    setCarregando(false)\r\n  }\r\n\r\n  const validarEmail = (email) => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n  };\r\n\r\n  const verificarEmail = async () => {\r\n    setCarregando(true);\r\n    setMensagem('');\r\n\r\n    if (!validarEmail(email)) {\r\n      setMensagem('❌ Email inválido.');\r\n      setCarregando(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080';\r\n      const resposta = await fetch(`${API_URL}/recover_senha`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email }),\r\n      });\r\n\r\n      const dados = await resposta.json();\r\n\r\n      if (dados.sucesso) {\r\n        setMensagem('✅ Nova senha enviada para seu e-mail!');\r\n      } else if (dados.existe === false) {\r\n        setMensagem('❌ Email não encontrado.');\r\n      } else {\r\n        setMensagem('❌ Ocorreu um erro inesperado.');\r\n      }\r\n    } catch (error) {\r\n      setMensagem('❌ Erro ao verificar e enviar email.');\r\n    }\r\n\r\n    setCarregando(false);\r\n  };\r\n\r\n  const estilosMensagem = {\r\n    sucesso: { color: 'green' },\r\n    erro: { color: 'red' },\r\n  };\r\n\r\n  let tipoMensagem = 'erro';\r\n  if (mensagem.includes('Nova senha')) tipoMensagem = 'sucesso';\r\n\r\n  return (\r\n    <>\r\n      <h6 onClick={abrirModal}>Esqueceu sua senha?</h6>\r\n      {isOpen && <div className={`container ${isOpen ? 'open' : ''}`}>\r\n        <div className='container_content'>\r\n          <div className='alinhar_fecharModal'>\r\n            <h1 onClick={fecharModal}>x</h1>\r\n          </div>\r\n          <div className='alinhar_modal_content'>\r\n            <h2>Recuperar Senha</h2>\r\n            <input className='recover_input'\r\n              type=\"email\"\r\n              placeholder=\"Digite o email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n            <button onClick={verificarEmail}  disabled={carregando} className='recover_button'>\r\n              {carregando ? 'Enviando...' : 'Enviar nova senha'}\r\n            </button>\r\n            <p style={tipoMensagem === 'sucesso' ? estilosMensagem.sucesso : estilosMensagem.erro}>\r\n              {mensagem}\r\n            </p>\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n      }\r\n    </>  \r\n  );\r\n}\r\n\r\n\r\nexport default RecoverPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,eAAe,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEtB,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACU,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,UAAU,CAAEC,aAAa,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACc,MAAM,CAAEC,SAAS,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAG3C,KAAM,CAAAgB,UAAU,CAAGA,CAAA,GAAMD,SAAS,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAE,WAAW,CAAGA,CAAA,GAAM,CACxBF,SAAS,CAAC,KAAK,CAAC,CAChBN,QAAQ,CAAC,EAAE,CAAC,CACZE,WAAW,CAAC,EAAE,CAAC,CACfE,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,KAAM,CAAAK,YAAY,CAAIV,KAAK,EAAK,CAC9B,KAAM,CAAAW,UAAU,CAAG,4BAA4B,CAC/C,MAAO,CAAAA,UAAU,CAACC,IAAI,CAACZ,KAAK,CAAC,CAC/B,CAAC,CAED,KAAM,CAAAa,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjCR,aAAa,CAAC,IAAI,CAAC,CACnBF,WAAW,CAAC,EAAE,CAAC,CAEf,GAAI,CAACO,YAAY,CAACV,KAAK,CAAC,CAAE,CACxBG,WAAW,CAAC,mBAAmB,CAAC,CAChCE,aAAa,CAAC,KAAK,CAAC,CACpB,OACF,CAEA,GAAI,CACF,KAAM,CAAAS,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CACxE,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGL,OAAO,gBAAgB,CAAE,CACvDM,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAExB,KAAM,CAAC,CAChC,CAAC,CAAC,CAEF,KAAM,CAAAyB,KAAK,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAEnC,GAAID,KAAK,CAACE,OAAO,CAAE,CACjBxB,WAAW,CAAC,uCAAuC,CAAC,CACtD,CAAC,IAAM,IAAIsB,KAAK,CAACG,MAAM,GAAK,KAAK,CAAE,CACjCzB,WAAW,CAAC,yBAAyB,CAAC,CACxC,CAAC,IAAM,CACLA,WAAW,CAAC,+BAA+B,CAAC,CAC9C,CACF,CAAE,MAAO0B,KAAK,CAAE,CACd1B,WAAW,CAAC,qCAAqC,CAAC,CACpD,CAEAE,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,KAAM,CAAAyB,eAAe,CAAG,CACtBH,OAAO,CAAE,CAAEI,KAAK,CAAE,OAAQ,CAAC,CAC3BC,IAAI,CAAE,CAAED,KAAK,CAAE,KAAM,CACvB,CAAC,CAED,GAAI,CAAAE,YAAY,CAAG,MAAM,CACzB,GAAI/B,QAAQ,CAACgC,QAAQ,CAAC,YAAY,CAAC,CAAED,YAAY,CAAG,SAAS,CAE7D,mBACErC,KAAA,CAAAE,SAAA,EAAAqC,QAAA,eACEzC,IAAA,OAAI0C,OAAO,CAAE5B,UAAW,CAAA2B,QAAA,CAAC,qBAAmB,CAAI,CAAC,CAChD7B,MAAM,eAAIZ,IAAA,QAAK2C,SAAS,CAAE,aAAa/B,MAAM,CAAG,MAAM,CAAG,EAAE,EAAG,CAAA6B,QAAA,cAC7DvC,KAAA,QAAKyC,SAAS,CAAC,mBAAmB,CAAAF,QAAA,eAChCzC,IAAA,QAAK2C,SAAS,CAAC,qBAAqB,CAAAF,QAAA,cAClCzC,IAAA,OAAI0C,OAAO,CAAE3B,WAAY,CAAA0B,QAAA,CAAC,GAAC,CAAI,CAAC,CAC7B,CAAC,cACNvC,KAAA,QAAKyC,SAAS,CAAC,uBAAuB,CAAAF,QAAA,eACpCzC,IAAA,OAAAyC,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBzC,IAAA,UAAO2C,SAAS,CAAC,eAAe,CAC9BC,IAAI,CAAC,OAAO,CACZC,WAAW,CAAC,gBAAgB,CAC5BC,KAAK,CAAExC,KAAM,CACbyC,QAAQ,CAAGC,CAAC,EAAKzC,QAAQ,CAACyC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC3C,CAAC,cACF9C,IAAA,WAAQ0C,OAAO,CAAEvB,cAAe,CAAE+B,QAAQ,CAAExC,UAAW,CAACiC,SAAS,CAAC,gBAAgB,CAAAF,QAAA,CAC/E/B,UAAU,CAAG,aAAa,CAAG,mBAAmB,CAC3C,CAAC,cACTV,IAAA,MAAGmD,KAAK,CAAEZ,YAAY,GAAK,SAAS,CAAGH,eAAe,CAACH,OAAO,CAAGG,eAAe,CAACE,IAAK,CAAAG,QAAA,CACnFjC,QAAQ,CACR,CAAC,EACD,CAAC,EAEH,CAAC,CACH,CAAC,EAEN,CAAC,CAEP,CAGA,cAAe,CAAAH,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}